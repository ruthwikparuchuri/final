{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Disaster Prediction</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Inter:slnt,wght@-10..0,100..900&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">
    
    <link rel="stylesheet" href="{% static 'user/lib/animate/animate.min.css' %}"/>
    <link rel="stylesheet" href="{% static 'user/lib/lightbox/css/lightbox.min.css' %}">
    <link rel="stylesheet" href="{% static 'user/lib/owlcarousel/assets/owl.carousel.min.css' %}">
    
    <link rel="stylesheet" href="{% static 'user/css/bootstrap.min.css' %}">
    
    <link rel="stylesheet" href="{% static 'user/css/style.css' %}">
    
    <style>
        button {
            background-color: #015fc9;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 20%;
            margin-top: 20px;
            border-radius:50px;
            margin-bottom:20px;
            
        }
        
        button:hover {
            background-color: #212529;
        }
        .chart-container {
            width: 50%;
            height: 400px;
        }
    </style>
</head>

<body>
    
    <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    
    <div class="container-fluid topbar px-0 px-lg-4 bg-light py-2 d-none d-lg-block">
        <div class="container">
            <div class="row gx-0 align-items-center">
                <div class="col-lg-8 text-center text-lg-start mb-lg-0">
                    <div class="d-flex flex-wrap">
                        <div class="border-end border-primary pe-3">
                            <a href="#" class="text-muted small"><i class="fas fa-map-marker-alt text-primary me-2"></i>Namburu</a>
                        </div>
                        <div class="ps-3">
                            <a href="mailto:example@gmail.com" class="text-muted small"><i class="fas fa-envelope text-primary me-2"></i>paruchuriruthwik27@gmail.com</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 text-center text-lg-end">
                    <div class="d-flex justify-content-end">
                        <div class="d-flex border-end border-primary pe-3">
                            <a class="btn p-0 text-primary me-3" href="#"><i class="fab fa-facebook-f"></i></a>
                            <a class="btn p-0 text-primary me-3" href="#"><i class="fab fa-twitter"></i></a>
                            <a class="btn p-0 text-primary me-3" href="#"><i class="fab fa-instagram"></i></a>
                            <a class="btn p-0 text-primary me-0" href="#"><i class="fab fa-linkedin-in"></i></a>
                        </div>
                        <div class="dropdown ms-3">
                            <a href="#" class="dropdown-toggle text-dark" data-bs-toggle="dropdown"><small><i class="fas fa-globe-europe text-primary me-2"></i> English</small></a>
                            <div class="dropdown-menu rounded">
                                <a href="#" class="dropdown-item">English</a>
                                <a href="#" class="dropdown-item">Bangla</a>
                                <a href="#" class="dropdown-item">French</a>
                                <a href="#" class="dropdown-item">Spanish</a>
                                <a href="#" class="dropdown-item">Arabic</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container-fluid nav-bar px-0 px-lg-4 py-lg-0">
        <div class="container">
            <nav class="navbar navbar-expand-lg navbar-light"> 
                <a href="#" class="navbar-brand p-0">
                    <h1 class="text-primary mb-0"><i class="fas fa-exclamation-triangle me-2"></i> Disaster Prediction</h1>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                    <span class="fa fa-bars"></span>
                </button>
                <div class="collapse  navbar-collapse" id="navbarCollapse">
                    <div class="navbar-nav  mx-0 mx-lg-auto ">
                        <a href="{% url 'user_dashboard' %}" class="nav-item nav-link">Dashboard</a>
                        <!-- <a href="{% url 'view_and_pay' %}" class="nav-item nav-link">View and Pay Fines</a> -->
                        {% comment %} <a href="{% url 'user_login' %}" class="nav-item nav-link">User</a> {% endcomment %}
                        {% comment %} <a href="{% url 'admin_login' %}" class="nav-item nav-link">Admin</a> {% endcomment %}
                        <a href="{% url 'user_profile' %}" class="nav-item nav-link ">My Profile</a>
                        <div class="nav-item dropdown active">
                            <a href="#" class="nav-link dropdown-toggle active" data-bs-toggle="dropdown">Predictions</a>
                            <div class="dropdown-menu">
                                <a href="{% url 'weather' %}" class="dropdown-item">Weather</a>
                                <a href="{% url 'earthquake' %}" class="dropdown-item">Earth</a>
                                <a href="{% url 'flood_prediction' %}" class="dropdown-item">Floods</a>
                                <a href="{% url 'Sunami' %}" class="dropdown-item">Tsunami</a>
                                <a href="{% url 'chatbot' %}" class="dropdown-item">Chatbot</a>

                            </div>
                        </div>
                        <a href="{% url 'satiable_requests' %}" class="nav-item nav-link ">Suitable Requests</a>
                        <a href="{% url 'feedback' %}" class="nav-item nav-link ">Feedback</a>


                    </div>
                    <div class="d-flex justify-content-end">
                        <a href="{% url 'user_logout' %}" class="btn btn-danger rounded-pill py-2 px-4 ms-3 flex-shrink-0">Logout</a>
                    </div>
                </div>
            </nav>
        </div>
    </div>
    <div class="modal fade" id="searchModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-fullscreen">
            <div class="modal-content rounded-0">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Search by keyword</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body d-flex align-items-center bg-primary">
                    <div class="input-group w-75 mx-auto d-flex">
                        <input type="search" class="form-control p-3" placeholder="keywords" aria-describedby="search-icon-1">
                        <span id="search-icon-1" class="btn bg-light border nput-group-text p-3"><i class="fa fa-search"></i></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
  
    <div class="container-fluid feature bg-light py-5">
        <div class="container rounded bg-white mb-5 border border-black" >
            <div class="row ">
                <!DOCTYPE html>
                <html lang="en">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Earthquake Prediction</title>
                    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
                </head>
                <body>
                    <div class="container mt-5">
                        <!-- Title -->
                        <h1 class="text-center" style=" color: #4CAF50;">Earthquake Prediction System</h1>
                        <p class="text-center text-muted">Enter the details below to predict the earthquake magnitude category and receive precautions.</p>
                
                        <!-- Form Section -->
                        <form method="POST" action="">
                            {% csrf_token %}
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="cdi" class="form-label">CDI (Community Determined Intensity)</label>
                                    <input type="number" step="0.1" name="cdi" id="cdi" class="form-control" placeholder="e.g., 9.0" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="nst" class="form-label">NST (Number of Stations Reporting)</label>
                                    <input type="number" name="nst" id="nst" class="form-control" placeholder="e.g., 141" required>
                                </div>
                            </div>
                
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="depth" class="form-label">Depth (in km)</label>
                                    <input type="number" step="0.1" name="depth" id="depth" class="form-control" placeholder="e.g., 12.0" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="magnitude" class="form-label">Magnitude</label>
                                    <input type="number" step="0.1" name="magnitude" id="magnitude" class="form-control" placeholder="e.g., 6.6" required>
                                </div>
                            </div>
                
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="latitude" class="form-label">Latitude</label>
                                    <input type="number" step="0.01" name="latitude" id="latitude" class="form-control" placeholder="e.g., 29.72" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="longitude" class="form-label">Longitude</label>
                                    <input type="number" step="0.01" name="longitude" id="longitude" class="form-control" placeholder="e.g., 102.27" required>
                                </div>
                            </div>
                
                            <div class="row mb-3">
                                <div class="col-md-4">
                                    <label for="year" class="form-label">Year</label>
                                    <input type="number" name="year" id="year" class="form-control" placeholder="e.g., 2022" required>
                                </div>
                            </div>
                
                            <!-- Submit Button -->
                            <button type="submit" style="border-radius:30px; margin-bottom:20px; margin-left:500px;">Predict Earthquake Magnitude</button>
                        </form>
                
                        <!-- Messages Section -->
                        {% if messages %}
                        <div class='mt-4'>
                            {% for message in messages %}
                            <!-- Display messages with Bootstrap alert classes -->
                            <div 
                                {% if message.tags %} 
                                class='alert alert-{{ message.tags }}' 
                                {% else %} 
                                class='alert alert-info' 
                                {% endif %}>
                                {{ message }}
                            </div>
                            {% endfor %}
                        </div>
                        {% endif %}
                
                        <!-- Prediction Result Section -->
                        {% if prediction %}
                        <hr />
                        <h2>Prediction Result</h2>
                        <p><strong>Predicted Magnitude Category:</strong> {{ prediction }}</p>
                        <div class="chart-container" style="margin-left:300px;">
                            <canvas id="metricsChart"></canvas>
                        </div>
                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                        <script>
                            // Static values for F1 Score, Recall, Accuracy, and Precision
                            const metricsData = {
                                labels: ['Accuracy', 'Precision', 'F1 Score', 'Recall'], // Labels for the chart
                                datasets: [{
                                    label: 'Performance Metrics',
                                    data: [92.71, 97.0, 94.0, 92.0], // Replace these values with actual metrics
                                    backgroundColor: [
                                        'rgba(0, 123, 255, 0.5)', // Accuracy: Blue
                                        'rgba(40, 167, 69, 0.5)', // Precision: Green
                                        'rgba(255, 193, 7, 0.5)',  // F1 Score: Yellow
                                        'rgba(220, 53, 69, 0.5)'   // Recall: Red
                                    ],
                                    borderColor: [
                                        'rgba(0, 123, 255, 1)', // Accuracy border color
                                        'rgba(40, 167, 69, 1)', // Precision border color
                                        'rgba(255, 193, 7, 1)',  // F1 Score border color
                                        'rgba(220, 53, 69, 1)'   // Recall border color
                                    ],
                                    borderWidth: 1
                                }]
                            };
                    
                            // Configuration for the chart
                            const chartOptions = {
                                responsive: true,
                                maintainAspectRatio: false,
                                scales: {
                                    y: {
                                        beginAtZero: true,
                                        ticks: {
                                            max: 1,
                                            stepSize: 0.1
                                        }
                                    }
                                },
                                plugins: {
                                    legend: {
                                        position: 'top'
                                    }
                                }
                            };
                    
                            // Create the chart
                            const ctx = document.getElementById('metricsChart').getContext('2d');
                            const metricsChart = new Chart(ctx, {
                                type: 'bar',
                                data: metricsData,
                                options: chartOptions
                            });
                        </script>
                        <!-- Precautionary Measures -->
                        {% if description %}
                        <h4>Precautions:</h4>
                        {{ description|safe }}
                        <div class="alert alert-info mt-4">
                            <h4>Model Evaluation:</h4>
                            <table class="table table-striped table-bordered">
                                <thead>
                                    <tr>
                                        <th>Metric</th>
                                        <th>Value</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Accuracy</strong></td>
                                        <td>{{ accuracy }}92.71%</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Precision</strong></td>
                                        <td>{{ precision }}97.0%</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Recall</strong></td>
                                        <td>{{ recall }}92.0%</td>
                                    </tr>
                                    <tr>
                                        <td><strong>F1 Score</strong></td>
                                        <td>{{ f1_score }}94.0%</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <form action="{% url 'help_page' %}" method="get">
                            <button type="submit" style="border-radius:30px; margin-bottom:20px; margin-left:500px;">Looking For Help</button>
                        </form>
                        
                        
                        {% endif %}
                        {% endif %}
                    </div>
                
                    <!-- Bootstrap JS -->
                    <script src='https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js'></script>
                </body>
                </html>
                
           
            </div>
            
        </div>
    </div>
    
   
  
    <div class="container-fluid footer py-5 wow fadeIn" data-wow-delay="0.2s">
        <div class="container py-5">
            <div class="row g-5">
                <div class="col-xl-9">
                    <div class="mb-5">
                        <div class="row g-4">
                            <div class="col-md-6 col-lg-6 col-xl-6">
                                <div class="footer-item">
                                    <a href="{% url 'index' %}" class="p-0">
                                        <h3 class="text-white"><i class="fas fa-exclamation-triangle me-2"></i> Disaster Prediction</h3>
                                        
                                    </a>
                                    <p class="text-white mb-4">Our system is built on reliable and secure technology to ensure accurate detection and identification.</p>
                                    <div class="footer-btn d-flex">
                                        <a class="btn btn-md-square rounded-circle me-3" href="#"><i class="fab fa-facebook-f"></i></a>
                                        <a class="btn btn-md-square rounded-circle me-3" href="#"><i class="fab fa-twitter"></i></a>
                                        <a class="btn btn-md-square rounded-circle me-3" href="#"><i class="fab fa-instagram"></i></a>
                                        <a class="btn btn-md-square rounded-circle me-0" href="#"><i class="fab fa-linkedin-in"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 col-lg-6 col-xl-6">
                                <div class="footer-item">
                                    <h4 class="text-white mb-4">Useful Links</h4>
                                    <a href="#"><i class="fas fa-angle-right me-2"></i> Dashboard</a>
                                    <a href="#"><i class="fas fa-angle-right me-2"></i> Fines</a>
                                    <a href="#"><i class="fas fa-angle-right me-2"></i> My Profile</a>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    <div class="pt-5" style="border-top: 1px solid rgba(255, 255, 255, 0.08);">
                        <div class="row g-0">
                            <div class="col-12">
                                <div class="row g-4">
                                    <div class="col-lg-6 col-xl-4">
                                        <div class="d-flex">
                                            <div class="btn-xl-square bg-primary text-white rounded p-4 me-4">
                                                <i class="fas fa-map-marker-alt fa-2x"></i>
                                            </div>
                                            <div>
                                                <h4 class="text-white">Address</h4>
                                                <p class="mb-0">Namburu</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-xl-4">
                                        <div class="d-flex">
                                            <div class="btn-xl-square bg-primary text-white rounded p-4 me-4">
                                                <i class="fas fa-envelope fa-2x"></i>
                                            </div>
                                            <div>
                                                <h4 class="text-white">Mail Us</h4>
                                                <p class="mb-0">paruchuriruthwik27@gmail.com</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-xl-4">
                                        <div class="d-flex">
                                            <div class="btn-xl-square bg-primary text-white rounded p-4 me-4">
                                                <i class="fa fa-phone-alt fa-2x"></i>
                                            </div>
                                            <div>
                                                <h4 class="text-white">Telephone</h4>
                                                <p class="mb-0">95733 34457</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-xl-3">
                    <div class="footer-item">
                       <h4 class="text-white mb-4">Disaster prediction</h4>
                        <p class="text-white mb-3">Disaster prediction refers to the process of using scientific data, technology, and forecasting models to anticipate and predict natural or man-made disasters before they occur. This prediction aims to reduce the impact of these events by enabling early warnings and preparedness strategies. It involves monitoring various environmental, geological, meteorological, and technological factors that could indicate an impending disaster..</p>
                       <div class="position-relative rounded-pill mb-4">
                            <input class="form-control rounded-pill w-100 py-3 ps-4 pe-5" type="text" placeholder="Enter your email">
                            <button type="button" class="btn btn-primary rounded-pill position-absolute top-0 end-0 py-2 mt-2 me-2">SignUp</button>
                        </div>
                        <div class="d-flex flex-shrink-0">
                            <div class="footer-btn">
                                <a href="#" class="btn btn-lg-square rounded-circle position-relative wow tada" data-wow-delay=".9s">
                                    <i class="fa fa-phone-alt fa-2x"></i>
                                    <div class="position-absolute" style="top: 2px; right: 12px;">
                                        <span><i class="fa fa-comment-dots text-secondary"></i></span>
                                    </div>
                                </a>
                            </div>
                            <div class="d-flex flex-column ms-3 flex-shrink-0">
                                <span>Call to Our Experts</span>
                                <a href="tel:+ 0123 456 7890"><span class="text-white">95733 34457</span></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container-fluid copyright py-4">
        <div class="container">
            <div class="row g-4 align-items-center">
                <div class="col-md-6 text-center text-md-end mb-md-0">
                    <span class="text-body"><a href="#" class="border-bottom text-white"><i class="fas fa-copyright text-light me-2"></i>Disaster Prediction</a>, All right reserved.</span>
                </div>
                <div class="col-md-6 text-center text-md-start text-body">
                    
                    Designed By <a class="border-bottom text-white" href="https://codeleaf.in"></a> Distributed By <a class="border-bottom text-white" href="https://codeleaf.in" target="_blank"> team</a>
                </div>
            </div>
        </div>
    </div>
    
    <a href="#" class="btn btn-primary btn-lg-square rounded-circle back-to-top"><i class="fa fa-arrow-up"></i></a>   
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'user/lib/wow/wow.min.js' %}"></script>
    <script src="{% static 'user/lib/easing/easing.min.js' %}"></script>
    <script src="{% static 'user/lib/waypoints/waypoints.min.js' %}"></script>
    <script src="{% static 'user/lib/counterup/counterup.min.js' %}"></script>
    <script src="{% static 'user/lib/lightbox/js/lightbox.min.js' %}"></script>
    <script src="{% static 'user/lib/owlcarousel/owl.carousel.min.js' %}"></script>
    
    <script src="{% static 'user/js/main.js' %}"></script>
</body>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

{% if messages %}
    {% for message in messages %}
        {% if message.level == DEFAULT_MESSAGE_LEVELS.WARNING %}
            <script>
                swal({
                    title: "Warning!",
                    text: "{{ message }}",
                    icon: "warning",
                    button: "OK",
                });
            </script>
        {% elif message.level == DEFAULT_MESSAGE_LEVELS.INFO %}
            <script>
                swal({
                    title: "Info :)",
                    text: "{{ message }}",
                    icon: "info",
                    button: "OK",
                });
            </script>
        {% elif message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
            <script>
                swal({
                    title: "Error :)",
                    text: "{{ message }}",
                    icon: "error",
                    button: "OK",
                });
            </script>
        {% elif message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
            <script>
                swal({
                    title: "Success :)",
                    text: "{{ message }}",
                    icon: "success",
                    button: "OK",
                });
            </script>
        {% endif %}
    {% endfor %}
{% endif %}
</html>